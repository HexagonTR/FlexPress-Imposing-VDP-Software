name: Debug Real Upload

on: 
  workflow_dispatch:

jobs:
  test-upload:
    runs-on: macos-latest
    steps:
      - name: Create Dummy File
        run: |
          # Apple'a gÃ¶ndermek iÃ§in sahte, iÃ§i boÅŸ ama geÃ§erli yapÄ±da bir zip oluÅŸturalÄ±m
          mkdir -p FakeApp.app/Contents
          touch FakeApp.app/Contents/Info.plist
          zip -r FakeApp.zip FakeApp.app
          echo "âœ… FakeApp.zip oluÅŸturuldu."

      - name: Attempt Real Upload (Debug Mode)
        env:
          APPLE_ID: ${{ secrets.APPLE_ID }}
          APPLE_PASSWORD: ${{ secrets.APPLE_APP_SPECIFIC_PASSWORD }}
          APPLE_TEAM: ${{ secrets.APPLE_TEAM_ID }}
        run: |
          echo "ğŸ“¡ Apple Notary Servisine dosya gÃ¶nderiliyor..."
          echo "Bu iÅŸlem baÅŸarÄ±sÄ±z olursa, gerÃ§ek ham hatayÄ± gÃ¶receÄŸiz."
          
          # notarytool submit komutu build iÅŸlemindeki yÃ¼klemenin aynÄ±sÄ±dÄ±r.
          # --wait parametresi ile sonucu bekleriz.
          
          xcrun notarytool submit FakeApp.zip \
            --apple-id "$APPLE_ID" \
            --team-id "$APPLE_TEAM" \
            --password "$APPLE_PASSWORD" \
            --wait \
            --verbose
